:root {
      --bg: #0b1020;
      --panel: #121831;
      --text: #e6e9f2;
      --muted: #9aa3b2;
      --accent: #6ee7ff;
      --good: #34d399;
      --bad: #fb7185;
      --grid: #1f2748;
      --shadow: 0 10px 30px rgba(0,0,0,.35);
    }
    /* Themes */
    [data-theme="neon"]{--bg:#050915;--panel:#0b122a;--text:#e8f0ff;--muted:#93a5c4;--accent:#7c3aed;--good:#22d3ee;--bad:#ff6b6b;--grid:#131a3a}
    [data-theme="retro"]{--bg:#191414;--panel:#22201e;--text:#fff7d6;--muted:#cabfa4;--accent:#ff9f1c;--good:#2ec4b6;--bad:#e71d36;--grid:#2b2723}
    [data-theme="contrast"]{--bg:#000;--panel:#111;--text:#fff;--muted:#cfcfcf;--accent:#ffd400;--good:#00ff4c;--bad:#ff1744;--grid:#222}

    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0; font-family:system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell, "Helvetica Neue", Arial, Noto Sans, sans-serif;
      background:var(--bg); color:var(--text); display:flex; align-items:center; justify-content:center; padding:16px;
    }
    .app{width:100%; max-width:1200px; display:grid; grid-template-columns: 1fr; gap:16px}
    @media (min-width: 920px){ .app{ grid-template-columns: 1fr 340px; } }

    .board-wrap{ background:linear-gradient(180deg, var(--panel), transparent 240px); border-radius:24px; padding:16px; box-shadow:var(--shadow); position:relative; }
    .topbar{ display:flex; gap:12px; align-items:center; justify-content:space-between; margin-bottom:10px }
    .stats{ display:flex; gap:12px; flex-wrap:wrap; align-items:center }
    .badge{ background:var(--panel); border:1px solid #00000030; padding:8px 12px; border-radius:999px; font-weight:600; }
    .badge small{ color:var(--muted); font-weight:500 }

    canvas{ width:100%; aspect-ratio:1/1; display:block; background: radial-gradient(1200px 1200px at 80% -10%, #ffffff12, transparent),
                            linear-gradient(0deg, #00000022, #00000000), var(--bg);
            border-radius:18px; box-shadow:inset 0 0 0 1px #00000040; }

    .panel{ background:var(--panel); border-radius:24px; padding:16px; box-shadow:var(--shadow); border:1px solid #00000030 }
    .panel h2{ margin:0 0 10px; font-size:20px }
    .controls{ display:grid; gap:12px }
    .row{ display:flex; align-items:center; justify-content:space-between; gap:12px }
    .row label{ color:var(--muted) }
    input[type=range]{ width:48%; accent-color:var(--accent) }
    select, button, .toggle {
      background:#0c1330; color:var(--text); border:1px solid #00000050; border-radius:12px; padding:10px 12px; font-weight:600; cursor:pointer;
    }
    select{ width:100% }
    button{ transition:transform .06s ease; }
    button:active{ transform:translateY(1px) }
    .btn-accent{ background: var(--accent); color:#0a0a0a; border: none; }
    .btn-danger{ background: var(--bad); color:#fff; border:none }
    .btn-ghost{ background:transparent; border-color:#ffffff30 }
    .grid{ display:grid; grid-template-columns: 1fr 1fr; gap:10px }

    .legend{ display:flex; flex-wrap:wrap; gap:8px; font-size:13px; color:var(--muted) }
    .legend .dot{ width:10px; height:10px; border-radius:2px; display:inline-block; margin-right:6px }

    .mobile-pad{ display:none; gap:10px; justify-content:center; margin-top:10px }
    .pad-grid{ display:grid; grid-template-columns: 60px 60px 60px; grid-template-rows: 60px 60px 60px; gap:8px; }
    .pad-grid button{ border-radius:14px }
    .pad-grid button:nth-child(2){ grid-column:2; grid-row:1 }
    .pad-grid button:nth-child(4){ grid-column:1; grid-row:2 }
    .pad-grid button:nth-child(5){ grid-column:2; grid-row:2 }
    .pad-grid button:nth-child(6){ grid-column:3; grid-row:2 }
    .pad-grid button:nth-child(8){ grid-column:2; grid-row:3 }

    @media (max-width: 680px){ .mobile-pad{ display:flex } }

    .footer{ text-align:center; color:var(--muted); font-size:12px; margin-top:8px }

    .pill{ padding:4px 8px; border-radius:999px; background:#ffffff10; font-size:12px; }
    .hidden{ display:none !important }